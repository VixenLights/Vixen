<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Common.WPFCommon.Controls"
             xmlns:Styles="clr-namespace:Common.WPFCommon.Styles" x:Class="Common.WPFCommon.Controls.SuperSlider"
             mc:Ignorable="d" >

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/WPFCommon;component/Theme/Theme.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <Style x:Key="ArrowButtonStyle" TargetType="Button">
                <Setter Property="Background" Value="{StaticResource BackColorBrush}"/>
                <Setter Property="Foreground" Value="{StaticResource ForeColorBrush}"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Grid>
                                <Border x:Name="BtnBorder" Background="{TemplateBinding Background}" BorderThickness="0">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <Border x:Name="BackgroundHighlighted" BorderBrush="#808080" BorderThickness="1,1,0,0" CornerRadius="2"/>
                                <Border x:Name="BackgroundSunken" BorderBrush="#101010" BorderThickness="0,0,1,1" CornerRadius="2"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="BtnBorder" Property="Background" Value="#444444"/>
                                </Trigger>

                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="BackgroundHighlighted" Property="BorderBrush" Value="#808080"/>
                                    <Setter TargetName="BackgroundSunken" Property="BorderBrush" Value="#101010"/>
                                    <Setter TargetName="BackgroundHighlighted" Property="BorderThickness" Value="0,0,0,1"/>
                                    <Setter TargetName="BackgroundSunken" Property="BorderThickness" Value="0,1,0,0"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="Button">
                <Style.Resources>
                    <Style TargetType="Border">
                        <Setter Property="CornerRadius" Value="0"/>
                    </Style>
                </Style.Resources>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="auto" />
        </Grid.ColumnDefinitions>

        <Button Grid.Column="0" Click="DecreaseButton_Click" IsTabStop="False" Width="16" Height="16" Style="{StaticResource ArrowButtonStyle}">
            <Path Data="M 8 0 L 0 4 L 8 8 Z" 
                  Fill="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}" 
                  Width="8" 
                  Stretch="Uniform"/>
        </Button>
        <Slider Grid.Column="1" x:Name="ValueSlider"
                Minimum="{Binding Minimum, RelativeSource={RelativeSource AncestorType={x:Type local:SuperSlider}}}"
                Maximum="{Binding Maximum, RelativeSource={RelativeSource AncestorType={x:Type local:SuperSlider}}}"
                Value="{Binding Value, RelativeSource={RelativeSource AncestorType={x:Type local:SuperSlider}}, Mode=TwoWay}"
                TickFrequency="{Binding TickFrequency, RelativeSource={RelativeSource AncestorType={x:Type local:SuperSlider}}}"
                SmallChange="{Binding SmallChange, RelativeSource={RelativeSource AncestorType={x:Type local:SuperSlider}}}"
                LargeChange="{Binding LargeChange, RelativeSource={RelativeSource AncestorType={x:Type local:SuperSlider}}}"
                AutoToolTipPlacement="{Binding AutoToolTipPlacement, RelativeSource={RelativeSource AncestorType={x:Type local:SuperSlider}}}"
                AutoToolTipPrecision="{Binding AutoToolTipPrecision, RelativeSource={RelativeSource AncestorType={x:Type local:SuperSlider}}}"
                PreviewMouseWheel="ValueSlider_Scroll"
                ValueChanged="ValueSlider_ValueChanged"
                Background="Transparent"
                Foreground="{StaticResource ForeColorBrush}"/>
        <Button Grid.Column="2" Click="ResetButton_Click" IsTabStop="False" Width="16" Height="16" Style="{StaticResource ArrowButtonStyle}">
            <Path Fill="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}" 
                  Width="10" Stretch="Uniform">
                <Path.Data>
                    <GeometryGroup FillRule="EvenOdd">
                        <EllipseGeometry Center="4,4" RadiusX="4" RadiusY="4" />
                        <EllipseGeometry Center="4,4" RadiusX="2" RadiusY="2" />
                    </GeometryGroup>
                </Path.Data>
            </Path>
        </Button>
        
        <Button Grid.Column="3" Click="IncreaseButton_Click" IsTabStop="False" Width="16" Height="16" Style="{StaticResource ArrowButtonStyle}">
            <Path Data="M 0 0 L 8 4 L 0 8 Z" 
                  Fill="{Binding RelativeSource={RelativeSource AncestorType=Button}, Path=Foreground}" 
                  Width="8" Stretch="Uniform"/>
        </Button>
    </Grid>
</UserControl>
